<%- include("header")%>
    <div class="content">                    
        <% var appTime = ["10:00 AM", "10:30 AM", "11:00 AM", "11:30 AM", "12:00PM", "3:00PM", "3:30PM", "4:00PM", "4:30PM",
        "7:00PM", "7:30PM", "8:00PM", "8:30PM", "9:00PM", "9:30PM"];
        %>

        <div class="view-profile">
            <div class="view-info">
                <div class="name" id="name"><%=name[0].name%></div>

                <div class="content1">
                    <a href="/doctors" class="book">Book an Appointment</a>
                </div>
            </div>
        </div>

        <ul class="accordion">
            <li>
                <input type="radio" name="accordion" id="first" checked>
                <label for="first">Upcoming Appointments</label>

                <div class="acc-content">

                    <%for(var i = 0; i<result.length; i++) {
                        for(var j = 0; j<data.length; j++) {
                            if(data[j].id === result[i].d_id && result[i].a_status===0) {%>
                                <div class="visit-due">
                                    <div class="patient-info">
                                        Patient Name : <%=result[i].p_name%> <br>
                                        Doctor Name: <%=data[j].name%> <br>
                                        Department: <%=data[j].dept_name%> <br>
                                        Room no.: <%= data[j].room_no%> <br>

                                        <% 
                                        var time = result[i].a_time;
                                        var dateObj = new Date(time);
        
                                        var day = dateObj.getDate();
                                        var month = dateObj.getMonth() + 1; // Month is zero-based
                                        var year = dateObj.getFullYear();
                                        
                                        var formattedDate = day + '/' + month + '/' + year;
                                        
                                        %>
                                        Date and Time: <%=formattedDate%>
                                        
                                        <%= appTime[result[i].serial] %>

                                    </div>
                        
                                    <div class="button-cancel">
                                        <form action="/cancle-appointment" method="post">
                                            <button type="submit" name="btn" value=<%=result[i].id %> >Cancel Appointment</button>
                                        </form>
                                    </div>
                                </div>
                            <%}
                        }
                        
                    }%>
                    

                </div>

            </li>

            <li>
                <input type="radio" name="accordion" id="second">
                <label for="second">Past Appointments</label>

                <div class="acc-content">
                    <%for(var i=0; i<result.length; i++) {
                        for(var j=0; j<data.length; j++) { 
                            if(data[j].id===result[i].d_id && result[i].a_status===1) {%>
                                <div class="visit-due">
                                    <div class="patient-info">
                                        Patient Name : <%=result[i].p_name%> <br>
                                        Doctor Name: <%=data[j].name%> <br>
                                        Department: <%=data[j].dept_name%> <br>
                                        Room no.: <%= data[j].room_no%> <br>
                                        <% 
                                        var time = result[i].a_time;
                                        var dateObj = new Date(time);
        
                                        var day = dateObj.getDate();
                                        var month = dateObj.getMonth() + 1; // Month is zero-based
                                        var year = dateObj.getFullYear();
                                        
                                        var formattedDate = day + '/' + month + '/' + year;
                                        
                                        %>
                                        Date and Time: <%=formattedDate%>
                                        
                                        <%= appTime[result[i].serial] %>

                                    </div>
                    
                                </div>
                            <%} 
                        } 
                    }%>

                </div>
            </li>

        </ul>
    </div>

    <!-- <script src="style.js"></script> -->
    <div class="contact-us">
        
        <div class="contact">
            <h3>Contact Us</h3>
            <p>Phone: +91 1234567890</p>
            <p>Email: ghbd@gmail.com </p>
        </div>

        <div class="contact">
            <h3>Address</h3>
            <p>3<sup>rd</sup> floor </p>
            <p>IICT Building, SUST</p>
        </div> 

        <div class="contact">
            <h3>File a Complaint</h3>
            <p>Phone: +91 1234567890</p>
            <p>Email: ghbd@gmail.com </p>
        </div>

    </div>
</body>

</html>
